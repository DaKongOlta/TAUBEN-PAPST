<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Der Papst der Tauben</title>

  <script src="https://cdn.tailwindcss.com"></script>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Silkscreen:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
            silkscreen: ['Silkscreen', 'cursive'],
          },
        }
      }
    }
  </script>

  <script type="importmap">
  {
    "imports": {
      "react/": "https://aistudiocdn.com/react@^19.2.0/",
      "react": "https://aistudiocdn.com/react@^19.2.0",
      "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/"
    }
  }
  </script>

  <style>
    /* General */
    body {
      font-family: 'Inter', sans-serif;
      background-color: #1c1917; /* stone-900 */
      color: #fafaf9; /* stone-50 */
      overflow: hidden; /* Prevent scrollbars from layout shifts */
    }

    /* Icons */
    @keyframes icon-pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    .animate-icon-pulse {
      animation: icon-pulse 2s infinite ease-in-out;
    }

    /* Morale */
    .morale-zealous { color: #fde047; } /* yellow-300 */
    .morale-content { color: #d1d5db; } /* gray-300 */
    .morale-wavering { color: #ef4444; } /* red-500 */
    @keyframes low-morale-pulse {
      0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
      50% { transform: scale(1.05); box-shadow: 0 0 10px 5px rgba(239, 68, 68, 0); }
    }
    .animate-low-morale-pulse { animation: low-morale-pulse 1.5s infinite ease-out; }

    /* Sprites & Animations */
    /* Pigeon Pope */
    @keyframes pope-idle {
      0%, 100% { transform: translateY(0) rotate(-1deg); }
      50% { transform: translateY(-3px) rotate(1deg); }
    }
    .animate-pope-idle { animation: pope-idle 3s infinite ease-in-out; }
    
    @keyframes pope-hat-bob {
      0%, 100% { transform: rotate(0deg); }
      50% { transform: rotate(4deg); }
    }
    .animate-pope-hat-bob { transform-origin: 38px 40px; animation: pope-hat-bob 3s infinite ease-in-out; animation-delay: 0.1s; }

    @keyframes head-peck {
      0%, 100% { transform: rotate(0deg); }
      40% { transform: rotate(35deg); }
      80% { transform: rotate(-10deg); }
    }
    .animate-head-peck {
        transform-origin: 50px 55px; /* Approximate neck pivot */
        animation: head-peck 0.7s ease-in-out;
    }

    /* Rival Pope */
    @keyframes rival-idle {
      0%, 100% { transform: translateY(0) rotate(1deg) scaleX(-1); }
      50% { transform: translateY(-2px) rotate(0deg) scaleX(-1); }
    }
    @keyframes rival-attack {
      0%, 100% { transform: translateX(0) scaleX(-1); }
      50% { transform: translateX(-30px) scaleX(-1) rotate(-8deg) scale(1.1); }
    }
    @keyframes rival-defeat {
      0% { transform: translateY(0) rotate(0) scaleX(-1); opacity: 1; }
      100% { transform: translateY(40px) rotate(90deg) scaleX(-1); opacity: 0; }
    }
    .animate-rival-idle { animation: rival-idle 2.5s infinite ease-in-out; transform: scaleX(-1); }
    .animate-rival-attack { animation: rival-attack 0.5s ease-out; transform: scaleX(-1); }
    .animate-rival-defeat { animation: rival-defeat 1s forwards ease-in; transform: scaleX(-1); }
    .rival-sprite-main { transform-origin: center; }

    /* Follower Pigeon */
    .follower-sprite-container { width: 4rem; height: 4rem; }
    @keyframes follower-idle {
      0%, 100% { transform: translateY(0) rotate(1deg); }
      50% { transform: translateY(-2px) rotate(-1deg); }
    }
    .animate-follower-idle { animation: follower-idle 3.5s infinite ease-in-out; animation-delay: var(--anim-delay, 0s); }

    @keyframes follower-head-peck {
        0%, 100% { transform: rotate(0deg); }
        40% { transform: rotate(40deg); }
        80% { transform: rotate(-5deg); }
    }
    .animate-follower-peck .pigeon-head-group {
        transform-origin: 25px 28px; /* Approx follower neck pivot */
        animation: follower-head-peck 0.8s ease-in-out infinite;
        animation-delay: var(--anim-delay, 0s);
    }

    @keyframes follower-look {
        0%, 100% { transform: rotate(0deg); }
        25% { transform: rotate(15deg); }
        75% { transform: rotate(-15deg); }
    }
    .animate-follower-look .pigeon-head-group {
        transform-origin: 25px 28px;
        animation: follower-look 4s ease-in-out infinite;
        animation-delay: var(--anim-delay, 0s);
    }

    @keyframes follower-wing-flap {
        0%, 100% { transform: rotate(0deg); }
        50% { transform: rotate(-25deg) scale(1.05); }
    }
    .animate-follower-flap .pigeon-wing {
        transform-origin: 22px 30px; /* Approx follower wing joint */
        animation: follower-wing-flap 0.5s ease-in-out infinite;
        animation-delay: var(--anim-delay, 0s);
    }
    
    @keyframes follower-chaotic {
        0%, 100% { transform: translate(0, 0) rotate(0deg); }
        20% { transform: translate(-2px, 1px) rotate(-5deg); }
        40% { transform: translate(2px, -1px) rotate(5deg); }
        60% { transform: translate(-1px, 2px) rotate(-3deg); }
        80% { transform: translate(1px, -2px) rotate(3deg); }
    }
    .animate-follower-chaotic .pigeon-eye-glow {
        animation: follower-eye-glow 0.5s infinite;
    }
    .animate-follower-chaotic {
        animation: follower-chaotic 0.3s infinite ease-in-out;
        animation-delay: var(--anim-delay, 0s);
    }
    @keyframes follower-eye-glow {
        0%, 100% { opacity: 0; }
        50% { opacity: 1; }
    }

    /* Cards */
    @keyframes play-card {
      to { transform: translateY(-100px) scale(1.1) rotate(5deg); opacity: 0; }
    }
    .animate-play-card { animation: play-card 0.5s forwards ease-in; }
    @keyframes draw-card {
      from { transform: translateY(100px) scale(0.8); opacity: 0; }
      to { transform: translateY(0) scale(1); opacity: 1; }
    }
    .animate-draw-card { animation: draw-card 0.4s ease-out; }

    /* Modals & Overlays */
    @keyframes fade-in {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    .animate-fade-in { animation: fade-in 0.3s ease-out forwards; }

    @keyframes fade-in-down {
      from { opacity: 0; transform: translateY(-20px) scale(0.98); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }
    .animate-fade-in-down { animation: fade-in-down 0.4s ease-out forwards; }

    @keyframes fade-out {
      0% { opacity: 1; transform: scale(1); }
      80% { opacity: 1; transform: scale(1); }
      100% { opacity: 0; transform: scale(0.9); }
    }
    .animate-fade-out { animation: fade-out 2s ease-in-out forwards; }

    /* Revolt Effect */
    @keyframes revolt-spark-effect {
        0% { transform: scale(0); opacity: 0.5; }
        70% { transform: scale(1.5); opacity: 1; }
        100% { transform: scale(2); opacity: 0; }
    }
    .revolt-spark {
        position: absolute;
        width: 40px;
        height: 40px;
        background: radial-gradient(circle, rgba(255, 100, 100, 0) 0%, rgba(239, 68, 68, 0.8) 40%, rgba(255, 100, 100, 0) 70%);
        border-radius: 50%;
        animation: revolt-spark-effect 0.5s ease-out forwards;
        pointer-events: none;
    }

    /* Start Screen & Intro */
    .start-screen-bg {
        position: fixed;
        inset: 0;
        background: radial-gradient(ellipse at bottom, #1c1917 0%, #0c0a09 100%);
        overflow: hidden;
    }
    @keyframes move-clouds {
        0% { background-position: 0 0; }
        100% { background-position: -1000px 0; }
    }
    .parallax-clouds {
        position: absolute;
        inset: 0;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1000 300'%3E%3Cfilter id='f'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.01' numOctaves='5' seed='10'/%3E%3CfeDisplacementMap in='SourceGraphic' scale='80'/%3E%3C/filter%3E%3Crect width='1000' height='300' fill='%231c1917'/%3E%3Crect width='1000' height='300' filter='url(%23f)' opacity='0.2'/%3E%3C/svg%3E");
        background-size: 1000px 300px;
        animation: move-clouds 60s linear infinite;
        opacity: 0.1;
    }
    @keyframes shimmer {
        0% { transform: scale(0); opacity: 0.5; }
        50% { opacity: 0.2; }
        100% { transform: scale(1.5); opacity: 0; }
    }
    .shimmering-light {
        position: absolute;
        border-radius: 50%;
        background: radial-gradient(circle, rgba(253, 224, 71, 0.3) 0%, rgba(253, 224, 71, 0) 70%);
        animation: shimmer infinite ease-out;
    }
    @keyframes fade-in-subtle {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in-subtle { animation: fade-in-subtle 1.5s ease-out forwards; }
    @keyframes title-glow {
        0%, 100% { text-shadow: 0 0 10px #fcd34d, 0 0 20px #fcd34d, 0 0 30px #f59e0b; }
        50% { text-shadow: 0 0 15px #fef08a, 0 0 25px #fef08a, 0 0 40px #facc15; }
    }
    .animate-title-glow { animation: title-glow 4s infinite ease-in-out; }
    .start-menu-button {
        transition: all 0.2s ease-out;
        text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
    }
    .start-menu-button:not(:disabled):hover {
        transform: scale(1.05);
        box-shadow: 0 0 15px rgba(252, 211, 77, 0.5);
    }
    @keyframes intro-text-fade {
        0% { opacity: 0; transform: translateY(20px); }
        20% { opacity: 1; transform: translateY(0); }
        80% { opacity: 1; transform: translateY(0); }
        100% { opacity: 0; transform: translateY(-20px); }
    }
    .intro-text-panel {
        animation: intro-text-fade 4s ease-in-out forwards;
    }

    /* Divine Vision Cutscene */
    @keyframes celestial-float {
        0%, 100% { transform: translateY(0px) rotate(-2deg); }
        50% { transform: translateY(-10px) rotate(2deg); }
    }
    .animate-celestial-float { animation: celestial-float 8s infinite ease-in-out; }
    .vision-text-panel {
        animation: intro-text-fade 3.5s ease-in-out forwards;
    }

    /* Bureaucracy Minigame */
    @keyframes stamp-slam {
        from { transform: scale(2.5) rotate(-12deg); opacity: 0; }
        to { transform: scale(1) rotate(-12deg); opacity: 0.3; }
    }
    .animate-stamp-slam { animation: stamp-slam 0.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }
    @keyframes feedback-pop {
        0% { transform: scale(0.5) translate(-50%, -50%); opacity: 0; }
        50% { transform: scale(1.2) translate(-50%, -50%); opacity: 1; }
        100% { transform: scale(1) translate(-50%, -50%); opacity: 1; }
    }
    .animate-feedback-pop { animation: feedback-pop 0.3s ease-out forwards; }

    /* New UI: Tabs */
    .tab-content {
      animation: fade-in 0.3s ease-out;
    }

    /* New UI: Followers View */
    .stat-bar {
      background-color: #404040; /* neutral-700 */
      border-radius: 9999px;
      height: 0.75rem;
      overflow: hidden;
      border: 1px solid #262626;
    }
    .stat-bar-inner {
      height: 100%;
      border-radius: 9999px;
      transition: width 0.3s ease-out;
    }

    /* New UI: Map View */
    .map-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 8px;
    }
    .map-sector {
      clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
      transition: all 0.2s ease-out;
    }
    .map-sector.unlocked:hover {
        transform: scale(1.1);
        z-index: 10;
    }
    
    /* New UI: Skill Tree */
    .skill-tree-grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        grid-template-rows: repeat(4, 1fr);
        gap: 1.5rem;
    }
    .skill-node {
        transition: all 0.2s ease-out;
        position: relative;
    }
    .skill-connector {
        position: absolute;
        background-color: #a8a29e; /* stone-400 */
        z-index: -1;
    }
    .skill-connector.unlocked {
        background-color: #fcd34d; /* amber-400 */
    }

  </style>

</head>
<body>
  <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
</body>
</html>